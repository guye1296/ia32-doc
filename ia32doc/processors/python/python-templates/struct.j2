class {{ humps.pascalize(doc.short_name.lower()) }}(with_metaclass(BitFieldMeta, BitField)):
    """{{ strip_description(doc.long_description) }}"""

    {% for definition in definitions %}
      {{ definition.short_name }} = {{ definition.value }}
    {%- endfor %}

    def __init__(self, value):
        super().__init__(value, size_in_bytes={{ total_size  // 8 }})

    {% set offset = namespace(value=0) %}
    {% for field in struct_fields %}
    {{ field.short_name }} = BitFieldMember(
        "{{ field.short_name }}",
        """
        {{ strip_description(field.short_description) }}:
        {{ strip_description(field.long_description) }}
        """,
        {{ offset.value }},
        {{ field.size }}
        {% set offset.value = offset.value + field.size %}
    )

    {% endfor %}


